<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"></meta><title>PutS3Object</title><link rel="stylesheet" href="/nifi-docs/css/component-usage.css" type="text/css"></link></head><script type="text/javascript">window.onload = function(){if(self==top) { document.getElementById('nameHeader').style.display = "inherit"; } }</script><body><h1 id="nameHeader" style="display: none;">PutS3Object</h1><h2>Description: </h2><p>Puts FlowFiles to an Amazon S3 Bucket
The upload uses either the PutS3Object method or PutS3MultipartUpload methods.  The PutS3Object method send the file in a single synchronous call, but it has a 5GB size limit.  Larger files are sent using the multipart upload methods that initiate, transfer the parts, and complete an upload.  This multipart process saves state after each step so that a large upload can be resumed with minimal loss if the processor or cluster is stopped and restarted.
A multipart upload consists of three steps
  1) initiate upload,
  2) upload the parts, and
  3) complete the upload.
For multipart uploads, the processor saves state locally tracking the upload ID and parts uploaded, which must both be provided to complete the upload.
The AWS libraries select an endpoint URL based on the AWS region, but this can be overridden with the 'Endpoint Override URL' property for use with other S3-compatible endpoints.
The S3 API specifies that the maximum file size for a PutS3Object upload is 5GB. It also requires that parts in a multipart upload must be at least 5MB in size, except for the last part.  These limits are establish the bounds for the Multipart Upload Threshold and Part Size properties.</p><h3>Tags: </h3><p>Amazon, S3, AWS, Archive, Put</p><h3>Properties: </h3><p>In the list below, the names of required properties appear in <strong>bold</strong>. Any other properties (not in bold) are considered optional. The table also indicates any default values, whether a property supports the <a href="/nifi-docs/html/expression-language-guide.html">NiFi Expression Language</a>, and whether a property is considered "sensitive", meaning that its value will be encrypted. Before entering a value in a sensitive property, ensure that the <strong>nifi.properties</strong> file has an entry for the property <strong>nifi.sensitive.props.key</strong>.</p><table id="properties"><tr><th>Name</th><th>Default Value</th><th>Allowable Values</th><th>Description</th></tr><tr><td id="name"><strong>Object Key</strong></td><td id="default-value">${filename}</td><td id="allowable-values"></td><td id="description">No Description Provided.<br/><strong>Supports Expression Language: true</strong></td></tr><tr><td id="name"><strong>Bucket</strong></td><td id="default-value"></td><td id="allowable-values"></td><td id="description">No Description Provided.<br/><strong>Supports Expression Language: true</strong></td></tr><tr><td id="name">Content Type</td><td id="default-value"></td><td id="allowable-values"></td><td id="description">Sets the Content-Type HTTP header indicating the type of content stored in the associated object. The value of this header is a standard MIME type.
AWS S3 Java client will attempt to determine the correct content type if one hasn't been set yet. Users are responsible for ensuring a suitable content type is set when uploading streams. If no content type is provided and cannot be determined by the filename, the default content type "application/octet-stream" will be used.<br/><strong>Supports Expression Language: true</strong></td></tr><tr><td id="name">Access Key</td><td id="default-value"></td><td id="allowable-values"></td><td id="description">No Description Provided.<br/><strong>Sensitive Property: true</strong><br/><strong>Supports Expression Language: true</strong></td></tr><tr><td id="name">Secret Key</td><td id="default-value"></td><td id="allowable-values"></td><td id="description">No Description Provided.<br/><strong>Sensitive Property: true</strong><br/><strong>Supports Expression Language: true</strong></td></tr><tr><td id="name">Credentials File</td><td id="default-value"></td><td id="allowable-values"></td><td id="description">Path to a file containing AWS access key and secret key in properties file format.</td></tr><tr><td id="name">AWS Credentials Provider service</td><td id="default-value"></td><td id="allowable-values"><strong>Controller Service API: </strong><br/>AWSCredentialsProviderService<br/><strong>Implementation:</strong><a href="/nifi-docs/components/org.apache.nifi/nifi-aws-nar/1.3.0/org.apache.nifi.processors.aws.credentials.provider.service.AWSCredentialsProviderControllerService/index.html">AWSCredentialsProviderControllerService</a></td><td id="description">The Controller Service that is used to obtain aws credentials provider</td></tr><tr><td id="name"><strong>Storage Class</strong></td><td id="default-value">Standard</td><td id="allowable-values"><ul><li>Standard</li><li>ReducedRedundancy</li></ul></td><td id="description">No Description Provided.</td></tr><tr><td id="name"><strong>Region</strong></td><td id="default-value">us-west-2</td><td id="allowable-values"><ul><li>us-gov-west-1 <img src="/nifi-docs/html/images/iconInfo.png" alt="us-gov-west-1" title="us-gov-west-1"></img></li><li>us-east-1 <img src="/nifi-docs/html/images/iconInfo.png" alt="us-east-1" title="us-east-1"></img></li><li>us-east-2 <img src="/nifi-docs/html/images/iconInfo.png" alt="us-east-2" title="us-east-2"></img></li><li>us-west-1 <img src="/nifi-docs/html/images/iconInfo.png" alt="us-west-1" title="us-west-1"></img></li><li>us-west-2 <img src="/nifi-docs/html/images/iconInfo.png" alt="us-west-2" title="us-west-2"></img></li><li>eu-west-1 <img src="/nifi-docs/html/images/iconInfo.png" alt="eu-west-1" title="eu-west-1"></img></li><li>eu-west-2 <img src="/nifi-docs/html/images/iconInfo.png" alt="eu-west-2" title="eu-west-2"></img></li><li>eu-central-1 <img src="/nifi-docs/html/images/iconInfo.png" alt="eu-central-1" title="eu-central-1"></img></li><li>ap-south-1 <img src="/nifi-docs/html/images/iconInfo.png" alt="ap-south-1" title="ap-south-1"></img></li><li>ap-southeast-1 <img src="/nifi-docs/html/images/iconInfo.png" alt="ap-southeast-1" title="ap-southeast-1"></img></li><li>ap-southeast-2 <img src="/nifi-docs/html/images/iconInfo.png" alt="ap-southeast-2" title="ap-southeast-2"></img></li><li>ap-northeast-1 <img src="/nifi-docs/html/images/iconInfo.png" alt="ap-northeast-1" title="ap-northeast-1"></img></li><li>ap-northeast-2 <img src="/nifi-docs/html/images/iconInfo.png" alt="ap-northeast-2" title="ap-northeast-2"></img></li><li>sa-east-1 <img src="/nifi-docs/html/images/iconInfo.png" alt="sa-east-1" title="sa-east-1"></img></li><li>cn-north-1 <img src="/nifi-docs/html/images/iconInfo.png" alt="cn-north-1" title="cn-north-1"></img></li><li>ca-central-1 <img src="/nifi-docs/html/images/iconInfo.png" alt="ca-central-1" title="ca-central-1"></img></li></ul></td><td id="description">No Description Provided.</td></tr><tr><td id="name"><strong>Communications Timeout</strong></td><td id="default-value">30 secs</td><td id="allowable-values"></td><td id="description">No Description Provided.</td></tr><tr><td id="name">Expiration Time Rule</td><td id="default-value"></td><td id="allowable-values"></td><td id="description">No Description Provided.<br/><strong>Supports Expression Language: true</strong></td></tr><tr><td id="name">FullControl User List</td><td id="default-value">${s3.permissions.full.users}</td><td id="allowable-values"></td><td id="description">A comma-separated list of Amazon User ID's or E-mail addresses that specifies who should have Full Control for an object<br/><strong>Supports Expression Language: true</strong></td></tr><tr><td id="name">Read Permission User List</td><td id="default-value">${s3.permissions.read.users}</td><td id="allowable-values"></td><td id="description">A comma-separated list of Amazon User ID's or E-mail addresses that specifies who should have Read Access for an object<br/><strong>Supports Expression Language: true</strong></td></tr><tr><td id="name">Write Permission User List</td><td id="default-value">${s3.permissions.write.users}</td><td id="allowable-values"></td><td id="description">A comma-separated list of Amazon User ID's or E-mail addresses that specifies who should have Write Access for an object<br/><strong>Supports Expression Language: true</strong></td></tr><tr><td id="name">Read ACL User List</td><td id="default-value">${s3.permissions.readacl.users}</td><td id="allowable-values"></td><td id="description">A comma-separated list of Amazon User ID's or E-mail addresses that specifies who should have permissions to read the Access Control List for an object<br/><strong>Supports Expression Language: true</strong></td></tr><tr><td id="name">Write ACL User List</td><td id="default-value">${s3.permissions.writeacl.users}</td><td id="allowable-values"></td><td id="description">A comma-separated list of Amazon User ID's or E-mail addresses that specifies who should have permissions to change the Access Control List for an object<br/><strong>Supports Expression Language: true</strong></td></tr><tr><td id="name">Owner</td><td id="default-value">${s3.owner}</td><td id="allowable-values"></td><td id="description">The Amazon ID to use for the object's owner<br/><strong>Supports Expression Language: true</strong></td></tr><tr><td id="name">Canned ACL</td><td id="default-value">${s3.permissions.cannedacl}</td><td id="allowable-values"></td><td id="description">Amazon Canned ACL for an object, one of: BucketOwnerFullControl, BucketOwnerRead, LogDeliveryWrite, AuthenticatedRead, PublicReadWrite, PublicRead, Private; will be ignored if any other ACL/permission/owner property is specified<br/><strong>Supports Expression Language: true</strong></td></tr><tr><td id="name">SSL Context Service</td><td id="default-value"></td><td id="allowable-values"><strong>Controller Service API: </strong><br/>SSLContextService<br/><strong>Implementation:</strong><a href="/nifi-docs/components/org.apache.nifi/nifi-ssl-context-service-nar/1.3.0/org.apache.nifi.ssl.StandardSSLContextService/index.html">StandardSSLContextService</a></td><td id="description">Specifies an optional SSL Context Service that, if provided, will be used to create connections</td></tr><tr><td id="name">Endpoint Override URL</td><td id="default-value"></td><td id="allowable-values"></td><td id="description">Endpoint URL to use instead of the AWS default including scheme, host, port, and path. The AWS libraries select an endpoint URL based on the AWS region, but this property overrides the selected endpoint URL, allowing use with other S3-compatible endpoints.<br/><strong>Supports Expression Language: true</strong></td></tr><tr><td id="name">Signer Override</td><td id="default-value">Default Signature</td><td id="allowable-values"><ul><li>Default Signature</li><li>Signature v4</li><li>Signature v2</li></ul></td><td id="description">The AWS libraries use the default signer but this property allows you to specify a custom signer to support older S3-compatible services.</td></tr><tr><td id="name"><strong>Multipart Threshold</strong></td><td id="default-value">5 GB</td><td id="allowable-values"></td><td id="description">Specifies the file size threshold for switch from the PutS3Object API to the PutS3MultipartUpload API.  Flow files bigger than this limit will be sent using the stateful multipart process.
The valid range is 50MB to 5GB.</td></tr><tr><td id="name"><strong>Multipart Part Size</strong></td><td id="default-value">5 GB</td><td id="allowable-values"></td><td id="description">Specifies the part size for use when the PutS3Multipart Upload API is used.
Flow files will be broken into chunks of this size for the upload process, but the last part sent can be smaller since it is not padded.
The valid range is 50MB to 5GB.</td></tr><tr><td id="name"><strong>Multipart Upload AgeOff Interval</strong></td><td id="default-value">60 min</td><td id="allowable-values"></td><td id="description">Specifies the interval at which existing multipart uploads in AWS S3 will be evaluated for ageoff.  When processor is triggered it will initiate the ageoff evaluation if this interval has been exceeded.</td></tr><tr><td id="name"><strong>Multipart Upload Max Age Threshold</strong></td><td id="default-value">7 days</td><td id="allowable-values"></td><td id="description">Specifies the maximum age for existing multipart uploads in AWS S3.  When the ageoff process occurs, any upload older than this threshold will be aborted.</td></tr><tr><td id="name"><strong>Server Side Encryption</strong></td><td id="default-value">None</td><td id="allowable-values"><ul><li>None</li><li>AES256</li></ul></td><td id="description">Specifies the algorithm used for server side encryption.</td></tr><tr><td id="name">Proxy Host</td><td id="default-value"></td><td id="allowable-values"></td><td id="description">Proxy host name or IP<br/><strong>Supports Expression Language: true</strong></td></tr><tr><td id="name">Proxy Host Port</td><td id="default-value"></td><td id="allowable-values"></td><td id="description">Proxy host port<br/><strong>Supports Expression Language: true</strong></td></tr></table><h3>Dynamic Properties: </h3><p>Dynamic Properties allow the user to specify both the name and value of a property.<table id="dynamic-properties"><tr><th>Name</th><th>Value</th><th>Description</th></tr><tr><td id="name">The name of a User-Defined Metadata field to add to the S3 Object</td><td id="value">The value of a User-Defined Metadata field to add to the S3 Object</td><td>Allows user-defined metadata to be added to the S3 object as key/value pairs<br/><strong>Supports Expression Language: true</strong></td></tr></table></p><h3>Relationships: </h3><table id="relationships"><tr><th>Name</th><th>Description</th></tr><tr><td>success</td><td>FlowFiles are routed to success relationship</td></tr><tr><td>failure</td><td>FlowFiles are routed to failure relationship</td></tr></table><h3>Reads Attributes: </h3><table id="reads-attributes"><tr><th>Name</th><th>Description</th></tr><tr><td>filename</td><td>Uses the FlowFile's filename as the filename for the S3 object</td></tr></table><h3>Writes Attributes: </h3><table id="writes-attributes"><tr><th>Name</th><th>Description</th></tr><tr><td>s3.bucket</td><td>The S3 bucket where the Object was put in S3</td></tr><tr><td>s3.key</td><td>The S3 key within where the Object was put in S3</td></tr><tr><td>s3.contenttype</td><td>The S3 content type of the S3 Object that put in S3</td></tr><tr><td>s3.version</td><td>The version of the S3 Object that was put to S3</td></tr><tr><td>s3.etag</td><td>The ETag of the S3 Object</td></tr><tr><td>s3.uploadId</td><td>The uploadId used to upload the Object to S3</td></tr><tr><td>s3.expiration</td><td>A human-readable form of the expiration date of the S3 object, if one is set</td></tr><tr><td>s3.sseAlgorithm</td><td>The server side encryption algorithm of the object</td></tr><tr><td>s3.usermetadata</td><td>A human-readable form of the User Metadata of the S3 object, if any was set</td></tr></table><h3>State management: </h3>This component does not store state.<h3>Restricted: </h3>This component is not restricted.<h3>Input requirement: </h3>This component requires an incoming relationship.<h3>See Also:</h3><p><a href="/nifi-docs/components/org.apache.nifi/nifi-aws-nar/1.3.0/org.apache.nifi.processors.aws.s3.FetchS3Object/index.html">FetchS3Object</a>, <a href="/nifi-docs/components/org.apache.nifi/nifi-aws-nar/1.3.0/org.apache.nifi.processors.aws.s3.DeleteS3Object/index.html">DeleteS3Object</a>, <a href="/nifi-docs/components/org.apache.nifi/nifi-aws-nar/1.3.0/org.apache.nifi.processors.aws.s3.ListS3/index.html">ListS3</a></p></body></html>